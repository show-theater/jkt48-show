```html
<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Detail Member - JKT48 Show Theater</title>

<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Segoe UI',Arial,sans-serif;background:#0f172a;color:#333;min-height:100vh;padding:20px}

.back-btn{
  position:fixed;
  top:20px;
  left:20px;
  background:rgba(255,255,255,0.1);
  backdrop-filter:blur(10px);
  border:1px solid rgba(255,255,255,0.2);
  color:#fff;
  padding:12px 24px;
  border-radius:50px;
  font-weight:bold;
  cursor:pointer;
  font-size:14px;
  transition:all 0.3s;
  text-decoration:none;
  display:inline-flex;
  align-items:center;
  gap:8px;
  z-index:100;
}
.back-btn:hover{background:rgba(255,255,255,0.2);transform:translateX(-5px)}

.container{
  max-width:500px;
  width:100%;
  margin:80px auto 40px;
  background:#1e293b;
  border-radius:24px;
  overflow:hidden;
  box-shadow:0 10px 40px rgba(0,0,0,0.5);
}

.header{
  background:linear-gradient(135deg,var(--gen-color),var(--gen-color-dark));
  padding:20px;
  text-align:center;
  position:relative;
}
.header h1{
  font-size:18px;
  margin:0;
  color:#fff;
  font-weight:600;
}

.photo-container{text-align:center;margin:20px 0}
.photo{
  width:160px;
  height:160px;
  border-radius:50%;
  border:4px solid #fff;
  object-fit:cover;
  box-shadow:0 8px 25px rgba(0,0,0,0.15);
  background:#f5f5f5;
}

.member-name{
  text-align:center;
  font-size:24px;
  font-weight:bold;
  color:#fff;
  margin:10px 0 30px;
}

.about-title{
  font-size:20px;
  font-weight:bold;
  color:#fff;
  margin:0 30px 20px;
}

.info-card{
  background:#2d3748;
  border:none;
  border-radius:20px;
  padding:20px;
  margin:0 30px 20px;
}

.info-row{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  padding:12px 0;
  border-bottom:1px solid #475569;
}
.info-row:last-child{border-bottom:none}
.info-label{
  color:#94a3b8;
  font-size:14px;
  font-weight:600;
  flex-shrink:0;
  width:120px;
}
.info-value{
  color:#fff;
  font-size:14px;
  font-weight:600;
  text-align:right;
  flex:1;
}

.content{padding:0 0 30px}

/* Progress Milestone Section */
.milestone-section{
  margin:0 30px 15px;
}
.milestone-card{
  background:#2d3748;
  border-radius:12px;
  padding:12px;
  border:none;
}
.milestone-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:8px;
}
.milestone-title{
  font-size:12px;
  font-weight:600;
  color:#94a3b8;
}
.milestone-target{
  font-size:16px;
  font-weight:bold;
  transition:color 0.3s;
}
.milestone-target.normal{
  color:var(--gen-color);
}
.milestone-target.warning{
  color:#facc15;
}
.milestone-target.completed{
  color:#22c55e;
}
.progress-bar-container{
  height:18px;
  background:#374151;
  border-radius:9px;
  overflow:visible;
  position:relative;
  margin-bottom:6px;
}
.progress-bar-fill{
  height:100%;
  background:var(--gen-color);
  border-radius:9px;
  transition:width 1s cubic-bezier(0.4,0,0.2,1);
  position:relative;
  /* box-shadow:0 0 10px var(--gen-color); */  /* DICOMMENT */
}
.progress-text{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%, -50%);
  font-size:11px;
  font-weight:600;
  color:#94a3b8;  /* Abu-abu terang seperti di screenshot */
  z-index:10;
}
.progress-info{
  text-align:center;
  font-size:11px;
  color:#9ca3af;
  font-weight:500;
}

/* Social Media Section */
.social-section{
  margin:0 30px 15px;
}
.social-link{
  display:flex;
  align-items:center;
  padding:10px 0;
  background:transparent;
  border:none;
  border-radius:0;
  margin-bottom:8px;
  text-decoration:none;
  transition:all 0.3s;
}
.social-link:hover{
  transform:translateX(5px);
}
.social-link:last-child{
  margin-bottom:0;
}
.social-icon{
  width:44px;
  height:44px;
  border-radius:12px;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-shrink:0;
  background:#2d3748;
  border:none;
}
.social-icon svg{
  width:22px;
  height:22px;
  color:#fff;
}
.social-info{
  flex:1;
  margin-left:12px;
}
.social-name{
  font-size:13px;
  font-weight:bold;
  color:#fff;
  margin-bottom:1px;
}
.social-handle{
  font-size:12px;
  color:#94a3b8;
  font-weight:500;
}
.social-arrow{
  font-size:16px;
  color:#fff;
  font-weight:bold;
}

.loading{text-align:center;padding:100px 20px;color:#94a3b8}

/* Responsive */
@media (max-width: 767px) and (min-width: 481px) {
  body{padding:15px}
  .back-btn{top:15px;left:15px;padding:10px 20px;font-size:13px}
  .container{max-width:450px;margin:70px auto 30px;border-radius:20px}
  .header{padding:18px}
  .header h1{font-size:17px}
  .photo{width:150px;height:150px}
  .member-name{font-size:22px}
  .about-title{font-size:19px;margin:0 25px 18px}
  .info-card{margin:0 25px 18px}
  .milestone-section{margin:0 25px 12px}
  .milestone-card{padding:11px}
  .social-section{margin:0 25px 15px}
}

@media (max-width: 480px) {
  body{padding:10px}
  .back-btn{top:10px;left:10px;padding:8px 16px;font-size:12px;gap:6px}
  .container{max-width:100%;margin:60px auto 20px;border-radius:16px}
  .header{padding:15px}
  .header h1{font-size:16px}
  .photo{width:130px;height:130px;border-width:3px}
  .member-name{font-size:20px;margin:10px 0 20px}
  .about-title{font-size:18px;margin:0 20px 15px}
  .info-card{padding:15px;margin:0 20px 15px}
  .info-row{padding:10px 0}
  .info-label{font-size:13px;width:100px}
  .info-value{font-size:13px}
  .milestone-section{margin:0 20px 12px}
  .milestone-card{padding:10px}
  .milestone-title{font-size:11px}
  .milestone-target{font-size:15px}
  .progress-bar-container{height:16px}
  .progress-text{font-size:10px}
  .progress-info{font-size:10px}
  .social-section{margin:0 20px 15px}
  .social-icon{width:40px;height:40px}
  .social-icon svg{width:20px;height:20px}
  .social-name{font-size:12px}
  .social-handle{font-size:11px}
}

@media (max-width: 359px) {
  body{padding:8px}
  .back-btn{padding:6px 12px;font-size:11px}
  .container{margin:55px auto 15px}
  .header{padding:12px}
  .header h1{font-size:14px}
  .photo{width:110px;height:110px}
  .member-name{font-size:18px}
  .about-title{font-size:17px;margin:0 15px 12px}
  .info-card{padding:12px;margin:0 15px 12px}
  .milestone-section{margin:0 15px 10px}
  .milestone-card{padding:9px}
  .milestone-title{font-size:10px}
  .milestone-target{font-size:14px}
  .progress-bar-container{height:14px}
  .progress-text{font-size:9px}
  .progress-info{font-size:9px}
  .social-section{margin:0 15px 12px}
}

@media (max-height: 500px) and (orientation: landscape) {
  .container{margin:20px auto}
  .photo{width:100px;height:100px}
}

@media (min-width: 1025px) {
  .container{max-width:550px;margin:100px auto 50px}
  .photo{width:180px;height:180px}
  .member-name{font-size:26px}
  .about-title{font-size:22px;margin:0 35px 25px}
  .info-card{margin:0 35px 25px;padding:25px}
  .milestone-section{margin:0 35px 18px}
  .milestone-card{padding:14px}
  .milestone-title{font-size:13px}
  .milestone-target{font-size:18px}
  .progress-bar-container{height:20px}
  .progress-text{font-size:12px}
  .progress-info{font-size:12px}
  .social-section{margin:0 35px 20px}
}
</style>
</head>
<body>

<button onclick="goBack()" class="back-btn">‚Üê Kembali</button>

<div class="container" id="container">
  <div class="loading">‚è≥ Loading...</div>
</div>

<script>
const SUPABASE_URL = "https://pprxfopqkvpeajeoxzig.supabase.co";
const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBwcnhmb3Bxa3ZwZWFqZW94emlnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYyNTI4MTIsImV4cCI6MjA4MTgyODgxMn0.iXRO_dAHhtVHRLqGTresG_63RD2zIaopNXtXYNfthdg";

const urlParams = new URLSearchParams(window.location.search);
const MEMBER_NAME = urlParams.get('member');

const db = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

const GEN_COLORS = {
  3: '#ec4899',
  6: '#22c55e',
  7: '#10b981',
  8: '#3b82f6',
  9: '#06b6d4',
  10: '#38bdf8',
  11: '#f97316',
  12: '#fde68a',
  13: '#facc15',
  14: '#e9d5ff'
};

async function loadMember() {
  if (!MEMBER_NAME) {
    document.getElementById('container').innerHTML = '<div class="loading">Member tidak ditemukan</div>';
    return;
  }

  try {
    const { data, error } = await db
      .from('members')
      .select('*')
      .eq('name', MEMBER_NAME)
      .single();

    if (error) throw error;
    
    if (!data) {
      document.getElementById('container').innerHTML = '<div class="loading">Member tidak ditemukan</div>';
      return;
    }

    renderMember(data);
    
  } catch (err) {
    console.error('Error:', err);
    document.getElementById('container').innerHTML = '<div class="loading">Error loading data</div>';
  }
}

function renderMember(member) {
  const color = GEN_COLORS[member.gen] || '#ec4899';
  const colorDark = adjustColor(color, -20);
  
  document.documentElement.style.setProperty('--gen-color', color);
  document.documentElement.style.setProperty('--gen-color-dark', colorDark);
  
  // Calculate milestone
  const currentShow = member.show || 0;
  const nextMilestone = Math.ceil(currentShow / 100) * 100;
  const remaining = nextMilestone - currentShow;
  const progress = ((currentShow % 100) / 100) * 100;
  
  // Tentukan status warna target
  let statusClass = 'normal';
  if (remaining === 0) {
    statusClass = 'completed';  // Hijau - tepat tercapai
  } else if (remaining > 0 && remaining <= 10) {
    statusClass = 'warning';  // Kuning - hampir tercapai (kurang 10 show)
  } else {
    statusClass = 'normal';  // Ikut warna generasi
  }
  
  document.getElementById('container').innerHTML = `
    <div class="header">
      <h1>Profile Member</h1>
    </div>
    <div class="photo-container">
      <img class="photo" src="img/${member.name.toLowerCase()}.jpg" onerror="this.src='img/default.jpg'" alt="${member.name}">
    </div>
    <div class="member-name">${member.nickname || member.name}</div>
    <div class="content">
      
      <div class="about-title">About</div>
      <div class="info-card">
        <div class="info-row">
          <div class="info-label">Full Name</div>
          <div class="info-value">${member.full_name || member.name}</div>
        </div>
        <div class="info-row">
          <div class="info-label">Birthday</div>
          <div class="info-value">${member.birth_date || '-'}</div>
        </div>
        <div class="info-row">
          <div class="info-label">Blood Type</div>
          <div class="info-value">${member.blood_type || '-'}</div>
        </div>
        <div class="info-row">
          <div class="info-label">Horoscope</div>
          <div class="info-value">${member.zodiac || '-'}</div>
        </div>
        <div class="info-row">
          <div class="info-label">Height</div>
          <div class="info-value">${member.height || '-'}</div>
        </div>
        <div class="info-row">
          <div class="info-label">Generation</div>
          <div class="info-value">Gen ${member.gen}</div>
        </div>
        <div class="info-row">
          <div class="info-label">Nickname</div>
          <div class="info-value">${member.nickname || member.name}</div>
        </div>
      </div>
      
      <div class="milestone-section">
        <div class="milestone-card">
          <div class="milestone-header">
            <div class="milestone-title">Progress Milestone</div>
            <div class="milestone-target ${statusClass}">${nextMilestone} show</div>
          </div>
          <div class="progress-bar-container">
            <div class="progress-bar-fill" style="width:${progress}%"></div>
            <div class="progress-text">${currentShow} show</div>
          </div>
          <div class="progress-info">
            ${remaining === 0 ? 'üéâ Target tercapai!' : `${remaining} show lagi untuk mencapai target`}
          </div>
        </div>
      </div>
      
      ${member.twitter || member.instagram || member.tiktok ? `
      <div class="social-section">
        ${member.twitter ? `
        <a href="https://twitter.com/${member.twitter}" target="_blank" class="social-link">
          <div class="social-icon twitter">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>
            </svg>
          </div>
          <div class="social-info">
            <div class="social-name">Twitter</div>
            <div class="social-handle">@${member.twitter}</div>
          </div>
          <div class="social-arrow">‚Üí</div>
        </a>
        ` : ''}
        
        ${member.instagram ? `
        <a href="https://instagram.com/${member.instagram}" target="_blank" class="social-link">
          <div class="social-icon instagram">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
              <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
              <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
            </svg>
          </div>
          <div class="social-info">
            <div class="social-name">Instagram</div>
            <div class="social-handle">@${member.instagram}</div>
          </div>
          <div class="social-arrow">‚Üí</div>
        </a>
        ` : ''}
        
        ${member.tiktok ? `
        <a href="https://tiktok.com/@${member.tiktok}" target="_blank" class="social-link">
          <div class="social-icon tiktok">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M9 12a4 4 0 1 0 4 4V4a5 5 0 0 0 5 5"></path>
            </svg>
          </div>
          <div class="social-info">
            <div class="social-name">TikTok</div>
            <div class="social-handle">@${member.tiktok}</div>
          </div>
          <div class="social-arrow">‚Üí</div>
        </a>
        ` : ''}
      </div>
      ` : ''}
    </div>
  `;
}

function adjustColor(color, amount) {
  const num = parseInt(color.replace('#', ''), 16);
  const r = Math.max(0, Math.min(255, (num >> 16) + amount));
  const g = Math.max(0, Math.min(255, ((num >> 8) & 0x00FF) + amount));
  const b = Math.max(0, Math.min(255, (num & 0x0000FF) + amount));
  return '#' + ((r << 16) | (g << 8) | b).toString(16).padStart(6, '0');
}

function goBack() {
  if (window.history.length > 1) {
    window.history.back();
  } else {
    window.location.href = 'index.html';
  }
}

loadMember();
console.log('üöÄ JKT48 Show Theater - Detail View');
</script>
</body>
</html>